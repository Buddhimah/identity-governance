# Copyright (c) 2019, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
# http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

swagger: '2.0'
######################################################
# Prolog
######################################################
info:
  version: "1.0.0"
  title: "WSO2 Identity Tenant Resource Management Rest API"
  description: |
    This document specifies a **Tenant Resource  Management RESTfulAPI** for WSO2 **Identity Server** .

    It is written with [swagger 2](http://swagger.io/).

  contact:
    name: "WSO2"
    url: "http://wso2.com/products/identity-server/"
    email: "architecture@wso2.com"
  license:
    name: "Apache 2.0"
    url: "http://www.apache.org/licenses/LICENSE-2.0.html"

######################################################
# The fixed parts of the URLs of the API
######################################################

# The schemes supported by the API
schemes:
  - https

# The domain of the API.
# This is configured by the customer during deployment.
# The given host is just an example.
# host: apis.is.com

# The base path of the API.
# Will be prefixed to all paths.
# if the tenant domain is carbon.super basepath can be /api/identity/tenant-resource-mgt/v1.0 like this too.

basePath: /t/{tenant-domain}/api/identity/tenant-resource-mgt/v1.0

# The following media types can be passed as input in message bodies of the API.
# The actual media type must be specified in the Content-Type header field of the request.
# The default is json, i.e. the Content-Type header is not needed to
# be set, but supporting it serves extensibility.
consumes:
  - application/json

# The following media types may be passed as output in message bodies of the API.
# The media type(s) consumable by the requester is specified in the Accept header field
# of the corresponding request.
# The actual media type returned will be specified in the Content-Type header field
# of the of the response.
# The default of the Accept header is json, i.e. there is not needed to
# set the value, but supporting it serves extensibility.
produces:
  - application/json
paths:
  # Endpoint used to create resource types
  "/publisher":
    post:
      consumes:
        - multipart/form-data
      description: |
        This API is used to deploy a publisher given by the user.
      x-wso2-request: |
        curl -k -X POST "https://localhost:9443/api/identity/tenant-mgt/v1
        .0/publisher" -H "accept: application/json" -H "Content-Type:
        multipart/form-data" -H "Authorization: Basic <Base64Encoded[username:password]>"  -F
        "publisherFile={file-path}" -F "publisherFileName={publisher-name}"
      x-wso2-curl: |
        curl -k -X POST https://localhost:9443/api/identity/tenant-mgt/v1.0/publisher
        -H "accept: application/json" -H "Content-Type: multipart/form-data" -H 'Authorization: Basic
        YWRtaW46YWRtaW4=' -F "resourceFile=@/test.txt" -F "fileName=EmailPublisher"'
      x-wso2-response: |

      summary: |
        Create a publisher
      # post parameters:
      parameters:
        - name: resourceFile
          in: formData
          type: file
          description: This represents the corresponding publisher file that needs to be added.
        - name: file-name
          in: formData
          type: 'string'
          description: This represents the corresponding publisher file name that needs to be added.
      responses:
        200:
          description: Successful response
        400:
          description: Bad Request
          schema:
            $ref: '#/definitions/Error'
        401:
          description: Unauthorized
          schema:
            $ref: '#/definitions/Error'
        409:
          description: Conflict
          schema:
            $ref: '#/definitions/Error'
        500:
          description: Server Error
          schema:
            $ref: '#/definitions/Error'
      tags:
        - File

definitions:
  #-----------------------------------------------------
  # The Error Response  object
  #-----------------------------------------------------
  Error:
    type: object
    properties:
      code:
        type: string
      message:
        type: string
      description:
        type: string